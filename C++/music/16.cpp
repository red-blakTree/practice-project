#include <windows.h>
#include <stdio.h>
#include <iostream>
#include <mmsystem.h>  
#include <mutex>  
#pragma comment(lib,"winmm.lib")
using namespace std;
enum Scale {
	Rest = 0, C8 = 108, B7 = 107, A7s = 106, A7 = 105, G7s = 104, G7 = 103, F7s = 102, F7 = 101, E7 = 100,
	D7s = 99, D7 = 98, C7s = 97, C7 = 96, B6 = 95, A6s = 94, A6 = 93, G6s = 92, G6 = 91, F6s = 90, F6 = 89,
	E6 = 88, D6s = 87, D6 = 86, C6s = 85, C6 = 84, B5 = 83, A5s = 82, A5 = 81, G5s = 80, G5 = 79, F5s = 78,
	F5 = 77, E5 = 76, D5s = 75, D5 = 74, C5s = 73, C5 = 72, B4 = 71, A4s = 70, A4 = 69, G4s = 68, G4 = 67,
	F4s = 66, F4 = 65, E4 = 64, D4s = 63, D4 = 62, C4s = 61, C4 = 60, B3 = 59, A3s = 58, A3 = 57, G3s = 56,
	G3 = 55, F3s = 54, F3 = 53, E3 = 52, D3s = 51, D3 = 50, C3s = 49, C3 = 48, B2 = 47, A2s = 46, A2 = 45,
	G2s = 44, G2 = 43, F2s = 42, F2 = 41, E2 = 40, D2s = 39, D2 = 38, C2s = 37, C2 = 36, B1 = 35, A1s = 34,
	A1 = 33, G1s = 32, G1 = 31, F1s = 30, F1 = 29, E1 = 28, D1s = 27, D1 = 26, C1s = 25, C1 = 24, B0 = 23,
	A0s = 22, A0 = 21
};
//光之黎明
void Light(void);
void Light(void)
{
	HMIDIOUT handle;
	midiOutOpen(&handle, 0, 0, 0, 0);
	int light[] = {
		0,1,0,1000,1,F2,500,2,E5,C3,500,2,E5,E3,500,2,E5,A3,250,1,E5,250,2,E5,C4,500,1,D4,250,1,C5,250,2,C5,A4,500,2,B4,E3,500,//1
		2,B4,G2,500,1,D3,500,1,G3,500,1,B3,500,2,B4,D4,500,1,C5,500,2,B4,B3,500,2,B4,G3,500,//2
		2,B4,E2,500,1,B2,500,1,E3,500,1,G3,500,2,G4,B3,500,1,A4,500,2,B4,G3,250,1,A4,250,1,G3,250,1,A4,250,//3
		2,A4,A2,500,1,E3,500,1,A3,500,1,C4,500,1,E4,500,1,C4,500,1,A3,500,//4
		1,F2,500,2,E5,C3,500,2,E5,E3,500,2,E5,A3,250,1,E5,250,1,C4,500,1,G5,250,1,E5,250,2,E5,A3,500,2,D5,E3,500,//5
		1,G2,500,1,D3,500,1,G3,500,1,B3,500,2,D5,D4,500,1,G5,500,2,C5,B3,250,1,D5,250,1,G3,250,1,C5,250,//6
		1,F2,500,1,C3,500,1,E3,500,2,A4,A3,500,2,A4,C4,500,1,B4,500,2,C5,A3,500,2,D5,E3,500,//7
		2,E5,C2,500,1,G2,500,2,F5,C3,500,2,E5,E3,500,1,G3,500,1,G5,500,1,E3,500,2,F5,C3,250,1,E5,250,//8
		1,C2,500,1,G2,500,1,C3,500,2,G4,E3,500,2,E5,G3,500,1,F5,250,1,E5,250,2,E5,E3,250,1,C5,250,2,B4,C3,250,1,B4,250,//9
		2,B4,E2,500,2,G5,B2,250,1,G5,250,2,G5,E3,500,1,G3,500,1,B3,500,1,C5,500,2,B4,G3,500,2,C5,E3,500,//10
		2,A5,A2,500,2,G5,E3,250,1,G5,250,2,G5,A3,250,1,E5,500,1,C4,500,2,A5,E4,500,1,G4,250,1,G4,250,1,C4,250,1,E5,500,1,A3,250,1,E5,250,//11
		2,E5,E2,500,1,B2,500,1,E3,500,1,G3,500,1,B3,1000,1,G3,500,1,E3,500,//12
		2,A4,F2,250,1,B4,250,2,C5,C3,250,1,C5,250,1,A3,500,1,G5,250,1,G5,250,2,G5,G2,250,1,D5,500,1,D3,500,1,B3,500,1,G5,500,//13
		2,B4,E2,500,2,C5,B2,250,1,D5,250,2,D5,G3,250,1,D5,500,1,C5,250,2,C5,A2,500,	1,E3,500,1,C4,1000,//14
		2,E5,F2,500,2,F5,C3,500,2,E5,A3,500,1,A4,500,2,D5,G2,500,1,D3,500,1,B3,1000,//15
		1,C2,500,2,C5,G2,500,2,C5,C3,500,1,E3,500,3,E4,C4,G3,2000,//16
		1,C2,500,2,C5,G2,500,2,C5,C3,500,2,C5,E3,500,2,C5,G3,500,1,C5,500,2,C5,E3,250,1,D5,250,1,C3,250,1,B4,250,//17
		2,B4,E2,500,2,B4,B2,500,2,B4,E3,500,2,B4,G4,250,1,B4,250,2,B4,B3,250,1,B4,500,1,C5,250,2,C5,G3,250,1,B4,250,2,A4,E3,250,1,G4,250,//18
		2,A4,A2,250,1,C5,250,2,A4,E3,250,1,C5,250,1,A3,500,1,C4,500,1,E4,500,1,E5,500,2,C5,C4,500,2,A4,A3,250,1,G4,250,//19
		2,A4,F2,500,1,C3,500,2,C5,A3,500,1,C5,500,2,C5,G3,500,2,D5,D3,500,1,B3,1000,1,C5,500,//20
		1,C2,500,2,C5,G2,500,2,C5,C3,500,2,G4,E3,500,2,C5,G3,500,1,C5,500,2,G5,E3,250,1,F5,250,1,C3,250,1,E5,250,//21
		2, E5, E2, 500,2, B4, B2, 500,2, B4, E3, 500,2, B4, G4, 250,1, B4, 250,2, B4, B3, 250,1, B4, 500,1, C5, 250,2, C5, G3, 250,1, G5, 250,1, E3, 250,1, A4, 250,//22
		2,B4,F2,500,2,C5,C3,500,1,E3,500,2,F5,A3,250,1,E5,250,2,E5,C4,1000,1,A3,500,2,A4,E3,500,//23
		2,D5,D2,500,2,E5,A2,500,1,F3,500,1,F5,500,2,G5,G2,500,2,A5,D3,500,1,B3,1000,//24
		2,A5, C2, 500,1, G2, 500,1, C3, 500,2,G5, E3, 500,3, E4, C4, G3, 2000,//25
		1, C2, 500,1, G2, 500,1, C3, 500,2, G4, E3, 500,2, E5, G3, 500,1, F5, 250,1, E5, 250,2, E5, E3, 250,1, C5, 250,2, B4, C3, 250,1, B4, 250,//26
		2, B4, E2, 500,2, G5, B2, 250,1, G5, 250,2, G5, E3, 500,1, G3, 500,1, B3, 500,1, C5, 500,2, B4, G3, 500,2, C5, E3, 500,//27
		2, A5, A2, 500,2, G5, E3, 250,1, G5, 250,2, G5, A3, 250,1, E5, 500,1, C4, 500,2, A5, E4, 500,1, G4, 250,1, G4, 250,2, G5,C4, 250,1, E5, 500,1, A3, 250,1, E5, 250,//28
		2, E5, E2, 500,	1, B2, 500,1, E3, 500,2,F5, G3, 250,1,G5,250,1, B3, 1000,1, G3, 500,1, E3, 500,//29
		2, A4, F2, 250,1, B4, 250,2, C5, C3, 250,1, C5, 250,1, A3, 500,1, G5, 250,1, G5, 250,2, G5, G2, 250,1, D5, 500,1, D3, 500,1, B3, 500,1, G5, 500,//30
		2, B4, E2, 500,2, C5, B2, 250,1, D5, 250,2, D5, G3, 250,1, E5, 500,1, E5, 250,2, E5, A2, 500,1, E3, 500,1, C4, 1000,//31
		2,E5,F2,500,2,F5,C3,500,2,F5,E3,250,1,E5,250,1,A3,250,1,E5,250,2,F5,C4,1000,1,A3,500,2,G5,E3,500,//32
		2,E5,G2,500,2,D5,D3,500,1,G3,500,1,B3,500,1,D4,500,1,G4,500,2,D5,B3,500,2,E5,G3,500,//33
		2,E5, C2, 500,1, G2, 500,1, C3, 500,1, E3, 500,2, E5, G3, 500,1, F5, 250,1,E5,250,2, E5, E3, 250,1, C5, 250,1, C3, 250,1, B4, 250,//34
		2, B4, E2, 250,1, G5, 250,1, B2, 250,1, G5, 250,2,G5, E3, 500,1, G3, 500,1, B3, 500,1,C5,500,2, B4, G3, 500,2, C5, E3, 500,//35
		2, A5, A2, 500,	2, G5, E3, 250,	1, G5, 250,	2, G5, A3, 250,	1, E5, 500,	1, C4, 500,	2, C6, E4, 500,	1, C6, 250,	1, B5, 250,	2,B5, C4, 250,1, G5, 250,1, A3, 250,1, E5, 250,//36
		2, E5, E2, 500,1, B2, 500,1, E3, 500,1, G3, 500,1, B3, 1000,1, G3, 500,1, E3, 500,//37
		2, A4, F2, 250,1, B4, 250,2, C5, C3, 250,1, C5, 250,1, A3, 500,1, G5, 250,1, G5, 250,2, G5, G2, 250,1, D5, 500,1, D3, 500,1, B3, 1000,//38
	  	2, B4, E2, 500,2, C5, B2, 250,1, D5, 250,2, D5, G3, 250,1, E5, 500,	1, E5, 250,2, E5, A2, 250,1,D5,250,2,C5, E3, 500,1, C4, 1000,//39
		2, E5, F2, 500,2, F5, C3, 500,2, E5, E3, 250,1, A5, 250,1, A3, 250,1, C5, 250,2, C5, C4, 1000,1, A3, 500,1, E3, 500,//40
		2,E5,F2,500,2,F5,C3,500,2,F5,E3,250,1,F5,250,2,E5,A3,250,1,D5,250,2,C5,G2,250,1,B4,500,1,D3,500,1,B3,500,1,C5,500,//41
		2,E5,C2,500,1,G2,500,1,C3,500,1,E3,500,3,E4,C4,G3,2000,//42
		1, C2, 500, 1, G2, 500, 1, C3, 500, 2, G4, E3, 500, 2, E5, G3, 500, 1, F5, 250, 1, E5, 250, 2, E5, E3, 250, 1, C5, 250, 2, B4, C3, 250, 1, B4, 250,//43
		2, B4, E2, 500, 2, G5, B2, 250, 1, G5, 250, 2, G5, E3, 500, 1, G3, 500, 1, B3, 500, 1, C5, 500, 2, B4, G3, 500, 2, C5, E3, 500,//44
		2, A5, A2, 500, 2, G5, E3, 250, 1, G5, 250, 2, G5, A3, 250, 1, E5, 500, 1, C4, 500, 2, A5, E4, 500, 1, G4, 250, 1, G4, 250, 2, G5, C4, 500, 2, E5, A3, 250, 1, E5, 250,//45
		2, E5, E2, 500, 1, B2, 500, 1, E3, 500, 1, G3, 500, 1, B3, 1000, 1, G3, 500, 1, E3, 500,//46
		2, A4, F2, 250, 1, B4, 250, 2, C5, C3, 250, 1, C5, 250, 1, A3, 500, 1, G5, 250, 1, G5, 250, 2, G5, G2, 250, 1, D5, 500, 1, D3, 500, 1, B3, 500, 1, G5, 500,//47
		2, B4, E2, 500, 2, C5, B2, 250, 1, D5, 250, 2, D5, G3, 250, 1, E5, 250, 1, F5, 250, 1, E5, 250, 2, E5, A2, 500, 1, E3, 500, 1, C4, 1000,//48
		2, E5, F2, 500, 2, F5, C3, 500, 2, F5, E3, 250, 1, E5, 250, 1, A3, 250, 1, E5, 250, 2, F5, C4, 1000, 1, A3, 500, 2, A5, E3, 500,//49
		2, A5, G2, 500, 2, G5, D3, 500, 1, G3, 500, 1, B3, 500, 1, D4, 500, 1, A5, 500, 2, G5, B3, 500, 2, E5, G3, 500,//50
		2, E5, C2, 500, 1, G2, 500, 1, C3, 500, 1, E3, 500, 2, E5, G3, 500, 1, F5, 250, 1, E5, 250, 2, E5, E3, 250, 1, C5, 250, 1, C3, 250, 1, B4, 250,//51
		2, B4, E2, 250, 1, G5, 250, 1, B2, 250, 1, G5, 250, 2, G5, E3, 500, 1, G3, 500, 1, B3, 500, 1, G5, 250, 1, G5, 250, 1, G3, 250, 1, E5, 250, 2, D5, E3, 250, 1, C5, 250,//52
		2, A5, A2, 500, 2, G5, E3, 250, 1, G5, 250, 2, G5, A3, 250, 1, E5, 500, 1, C4, 500, 2, C6, E4, 500, 1, C6, 250, 1, B5, 250, 2, B5, C4, 250, 1, G5, 250, 1, A3, 250, 1, E5, 250,//53
		2, E5, F2, 500, 1, C3, 500, 1, A3, 1000, 1, G2, 500, 1, D3, 500, 1, B3, 1000,//54
		2, A4, C2, 250, 1, B4, 250, 2, C5, G2, 250, 1, C5, 250, 2, C5, C3, 500, 2, E3, G5, 250, 1, G5, 250, 2, A5, G2, 250, 1, G5, 750, 1, E3, 500, 1, C3, 500,//55
		2, G5, E2, 500,2,A5, B2, 500,2,B5, E3, 500,2,D6, G3, 500,2,D6, B3, 250,1,C6,250,1,D6,250,1,C6,250,1, G3, 500,1, E3, 500,//56
		2, A5, F2, 500,1, C3, 500,1, E3, 500,1, A3, 500,2, A5, C4, 1000,1, A3, 500,1, E3, 500,//57
		2, A5, G2, 500,2, G5, D3, 500,2,F5, G3, 250,1,E5,250,1, B3, 250,1,D5,250,2,D5, D4, 1000,1, B3, 500,1, G3, 500,//58
		2, C5, C2, 500,1, G2, 500,1, C3, 500,1, E3, 500,4,C5, E4, C4, G3, 2000,//59
		2, B4, G2, 500,1, D3, 500,1, G3, 500,1, B3, 500,1, D4, 1000,2, D5, B3, 500,1, G3, 500,//60
		2, C5, C2, 500,1, G2, 500,1, C3, 500,1, E3, 500,3, E4, C4, G3, 2000,//61
		1,0,1000,-1
	};
	int i = 1 , t = 0 , o = 0;
	int back[10010];
	while (light[i] != -1)
	{
		t = light[i];
		for (o = i + 1; o <= i + light[i]; ++o)
		{
			if (light[o] != 0)
			{
				back[o] = ((0x7f) << 16) + (light[o] << 8) + (0x90);
				midiOutShortMsg(handle, back[o]);
			}
		}
		Sleep(light[i + light[i] + 1]/1.4);
		i = i + light[i] + 2;
	}
	midiOutClose(handle);
}

int main(void)
{
	Light();
	return 0;
}