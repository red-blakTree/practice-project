#include <iostream>
#include <Windows.h>
#pragma comment(lib,"winmm.lib")
using namespace std;
enum Scale {
    //定义音高
    C8 = 108, B7 = 107, A7s = 106, A7 = 105, G7s = 104, G7 = 103, F7s = 102, F7 = 101, E7 = 100,
    D7s = 99, D7 = 98, C7s = 97, C7 = 96, B6 = 95, A6s = 94, A6 = 93, G6s = 92, G6 = 91, F6s = 90, F6 = 89,
    E6 = 88, D6s = 87, D6 = 86, C6s = 85, C6 = 84, B5 = 83, A5s = 82, A5 = 81, G5s = 80, G5 = 79, F5s = 78,
    F5 = 77, E5 = 76, D5s = 75, D5 = 74, C5s = 73, C5 = 72, B4 = 71, A4s = 70, A4 = 69, G4s = 68, G4 = 67,
    F4s = 66, F4 = 65, E4 = 64, D4s = 63, D4 = 62, C4s = 61, C4 = 60, B3 = 59, A3s = 58, A3 = 57, G3s = 56,
    G3 = 55, F3s = 54, F3 = 53, E3 = 52, D3s = 51, D3 = 50, C3s = 49, C3 = 48, B2 = 47, A2s = 46, A2 = 45,
    G2s = 44, G2 = 43, F2s = 42, F2 = 41, E2 = 40, D2s = 39, D2 = 38, C2s = 37, C2 = 36, B1 = 35, A1s = 34,
    A1 = 33, G1s = 32, G1 = 31, F1s = 30, F1 = 29, E1 = 28, D1s = 27, D1 = 26, C1s = 25, C1 = 24, B0 = 23,
    A0s = 22, A0 = 21
};
enum Simple {
    // 对应简谱, X, L, M, H分别指超低音、低音、中音、高音
    X1 = C2, X2 = D2, X3 = E2, X4 = F2, X5 = G2, X6 = A2, X7 = B2,
    L1 = C3, L2 = D3, L3 = E3, L4 = F3, L5 = G3, L6 = A3, L7 = B3,
    M1 = C4, M2 = D4, M3 = E4, M4 = F4, M5 = G4, M6 = A4, M7 = B4,
    H1 = C5, H2 = D5, H3 = E5, H4 = F5, H5 = G5, H6 = A5, H7 = B5,
    _ = 0XFF
};
enum Guitar_Frets {
    // 吉他指板对应的音高
    G10 = 64, G11 = 65, G12 = 66, G13 = 67, G14 = 68, G15 = 69, G16 = 70, G17 = 71, G18 = 72, G19 = 73, G110 = 74, G111 = 75, G112 = 76, G113 = 77, G114 = 78, G115 = 79, G116 = 80, G117 = 81, G118 = 82, G119 = 83,
    G20 = 59, G21 = 60, G22 = 61, G23 = 62, G24 = 63, G25 = 64, G26 = 65, G27 = 66, G28 = 67, G29 = 68, G210 = 69, G211 = 70, G212 = 71, G213 = 72, G214 = 73, G215 = 74, G216 = 75, G217 = 76, G218 = 77, G219 = 78,
    G30 = 55, G31 = 56, G32 = 57, G33 = 58, G34 = 59, G35 = 60, G36 = 61, G37 = 62, G38 = 63, G39 = 64, G310 = 65, G311 = 66, G312 = 67, G313 = 68, G314 = 69, G315 = 70, G316 = 71, G317 = 72, G318 = 73, G319 = 74,
    G40 = 50, G41 = 51, G42 = 52, G43 = 53, G44 = 54, G45 = 55, G46 = 56, G47 = 57, G48 = 58, G49 = 59, G410 = 60, G411 = 61, G412 = 62, G413 = 63, G414 = 64, G415 = 65, G416 = 66, G417 = 67, G418 = 68, G419 = 69,
    G50 = 45, G51 = 46, G52 = 47, G53 = 48, G54 = 49, G55 = 50, G56 = 51, G57 = 52, G58 = 53, G59 = 54, G510 = 55, G511 = 56, G512 = 57, G513 = 58, G514 = 59, G515 = 60, G516 = 61, G517 = 62, G518 = 63, G519 = 64,
    G60 = 40, G61 = 41, G62 = 42, G63 = 43, G64 = 44, G65 = 45, G66 = 46, G67 = 47, G68 = 48, G69 = 49, G610 = 50, G611 = 51, G612 = 52, G613 = 53, G614 = 54, G615 = 55, G616 = 56, G617 = 57, G618 = 58, G619 = 59
};
enum Bass_Frets {
    B10 = 43, B11 = 44, B12 = 45, B13 = 46, B14 = 47, B15 = 48, B16 = 49, B17 = 50, B18 = 51, B19 = 52, B110 = 53, B111 = 54, B112 = 55, B113 = 56, B114 = 57, B115 = 58, B116 = 59, B117 = 60, B118 = 61, B119 = 62,
    B20 = 38, B21 = 39, B22 = 40, B23 = 41, B24 = 42, B25 = 43, B26 = 44, B27 = 45, B28 = 46, B29 = 47, B210 = 48, B211 = 49, B212 = 50, B213 = 51, B214 = 52, B215 = 53, B216 = 54, B217 = 55, B218 = 56, B219 = 57,
    B30 = 33, B31 = 34, B32 = 35, B33 = 36, B34 = 37, B35 = 38, B36 = 39, B37 = 40, B38 = 41, B39 = 42, B310 = 43, B311 = 44, B312 = 45, B313 = 46, B314 = 47, B315 = 48, B316 = 49, B317 = 50, B318 = 51, B319 = 52,
    B40 = 28, B41 = 29, B42 = 30, B43 = 31, B44 = 32, B45 = 33, B46 = 34, B47 = 35, B48 = 36, B49 = 37, B410 = 38, B411 = 39, B412 = 40, B413 = 41, B414 = 42, B415 = 43, B416 = 44, B417 = 45, B418 = 46, B419 = 47
};
enum Drum {
    BS = A2, TH = F3, TM = D3, TL = B3
};
typedef struct note {
    int pitch; // 音高
    int time; // 时长
} note;

// 谱面
note guitar_1[]{
    /*1*/{0, 4}, {0, 4},

    /*2*/{E4, 4}, {0, 8}, {E4, 8}, {0, 4}, {D4, 4},   {0, 1},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*5*/{0, 8}, {D4, 8}, {0, 8}, {E4, 16}, {F4, 16}, {E4, 8}, {D4, 8}, {C4, 8}, {A3, 8},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*7*/{0, 8}, {D4, 8}, {0, 8}, {E4, 16}, {F4, 16}, {E4, 4}, {0, 4},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*9*/{0, 8}, {D4, 8}, {0, 8}, {E4, 16}, {F4, 16}, {E4, 8}, {D4, 8}, {C4, 8}, {A3, 8},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*11*/{0, 8}, {C5, 8}, {D5, 8}, {A4, 8}, {G4, 8}, {A4, 16}, {G4, 16}, {F4, 4},
    //   <--Rhythm Checked
    //主唱开始
    /*12*/{D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*13*/{0, 8}, {D4, 8}, {0, 8}, {E4, 16}, {F4, 16}, {E4, 8}, {D4, 8}, {C4, 8}, {A3, 8},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*15*/{0, 8}, {D4, 8}, {0, 8}, {E4, 16}, {F4, 16}, {E4, 4}, {0, 4},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*17*/{0, 8}, {D4, 8}, {0, 8}, {E4, 16}, {F4, 16}, {E4, 8}, {D4, 8}, {C4, 8}, {A3, 8},   {D4, 8}, {C4, 8}, {D4, 8}, {A4, 8}, {0, 8}, {D4, 8}, {0, 8}, {C4, 8},
    /*19*/{0, 8}, {D4, 8}, {0, 8}, {A3, 2}, {0, 8},    {F5, 8}, {D5, 16}, {F5, 32}, {D5, 32}, {C5, 8}, {D5, 4}, {C5, 8}, {A4, 8}, {G4s, 8},
    /*21*/{G4, 8}, {F4, 8}, {G4, 8}, {A4, 8}, {G4, 8}, {F4, 8}, {0, 8}, {C4, 8},
    /*22*/{G411, 8}, {G310, 8}, {G211, 8}, {G214, 4}, {G213, 8}, {G211, 8},/*欠8分之一拍*/    {A4, 16}, {A4s, 16}, {A4, 16}, {A4s, 16}, {A4, 16}, {A4s, 16}, {A4, 2}, {0, 4},/*还8分之一拍*/
    /*24*/{D4, 4}, {0, 8}, {C4s, 4}, {0, 8}, {E4, 8}, {0, 8},    {D4, 4}, {0, 8}, {C4, 8}, {D4, 8}, {D4, 8}, {0, 4},   {D4, 4}, {0, 8}, {C4s, 4}, {0, 8}, {E4, 8}, {0, 8},
    /*27*/{0, 8}, {F5, 8}, {D5, 8}, {C5, 8}, {B4, 8}, {A4, 8}, {B4, 8}, {A4, 8},
    /*28*/{D4, 4}, {0, 8}, {C4s, 4}, {0, 8}, {E4, 8}, {0, 8},    {D4, 4}, {0, 8}, {C4, 8}, {D4, 8}, {D4, 8}, {0, 4},   {G310, 8},{G310, 8}, {0, 8}, {G312, 4}, {G312, 8}, {0, 4},
    /*31*/{A2s, 8}, {C4s, 8}, {G3, 8}, {F4, 4}, {G3, 8}, {C4s, 8}, {G3, 8},    {G410,8},{0,8},{0,4},{G410,8},{0,8},{0,4},   {G33, 8}, {G33, 8}, {G33, 8}, {G33, 8}, {G37, 8}, {G37, 8},{G37, 8},{G37, 8},   {G36, 8},  {G36, 8}, {G36, 8}, {G36, 8},{G39, 8}, {G39, 8},{G39, 8},{G39, 8},
    //   <--Rhythm Checked
    /*35*/{G37, 8}, {G37, 8},{G37, 8},{G37, 8},{G37, 8},{G37, 8},{G37, 8},{G37, 8},    {G310, 8},{G310, 8},{G310, 8},{G310, 8},{G310, 8},{G310, 8},{G310, 8},{G310, 8},
    /*37*/{G312,8},{G312,8},{G312,8},{G412,4},{G312,4},{G412,8},    {G411,8},{G412,8},{G39,8},{G310,8},{0,8},{G19,4},{G18,32},{G17,32},{G16,32},{0,32},    {G23,8},{G23,8},{G23,8},{G23,8},{G23,8},{G23,8},{G23,4},    {G24,8},{G24,8},{G24,8},{G24,8},{G24,8},{G24,8},{G24,4},
    /*41*/{G33,8},{G33,8},{G33,8},{G33,8},{G37,8},{G37,8},{G37,8},{G37,8},    {G36,8},{G36,8},{G36,8},{G36,8},{G39,8},{G39,8},{G39,8},{G39,8},    {G310,8},{G310,8},{G310,8},{G310,8},{G310,8},{G310,8},{G312,8},{G312,8},    {G314,8},{G314,8},{G314,8},{G314,8},{G310,8},{G310,8},{G310,8},{G310,8},
    /*45*/{G45,8},{G45,8},{G45,8},{G45,4},{G63,8},{G45,8},{G63,8},    {G65,8},{G53,8},{G37,8},{G35,4},{G35,8},{G45,8},{G55,8},   {G26,8},{G26,8},{G26,8},{G26,8},{G210,8},{G210,8},{G210,8},{G210,8},    {G211,4},{G211,4},{0,8},{G213,4},{0,8},
    /*49*/{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},    {G112,8},{G112,8},{G112,8},{G112,8},{G115,8},{G115,8},{G115,8},{G115,8},    {G213,8},{G213,8},{G213,8},{G213,8},{G213,8},{G213,8},{G213,8},{G213,8},   {G113,8},{G113,8},{G113,8},{G113,4},/*长度为一拍半的无头无尾滑音*/{G35,32},{G36,32},{G37,32},{G38,32},{G39,32},{G310,16},{G39,32},{G38,32},{G37,32},{G36,32},{G35,32},/*长度为一拍半的无头无尾滑音*/
    /*53*/{G35,8},{G36,8},{G37,4},{G38,8},{G39,8},{G310,4},   {G37,8},{G38,8},{G39,4},{G10,8},{G11,8},{G12,4},   {G37,8},{G39,8},{G310,8},{G28,8},{0,8},{G210,4},{0,8},    {G28,8},{G56,8},{G56,8},{G28,4},{G28,8},{G28,4},
    /*57*/{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},{G113,8},    {G112,8},{G112,8},{G112,8},{G112,8},{G115,8},{G115,8},{G115,8},{G115,8},    {G213,8},{G213,8},{G213,8},{G213,8},{G213,8},{G213,8},{G213,8},{G213,8},   {G113,8},{G113,8},{G113,8},{G113,4},/*长度为一拍半的无头无尾滑音*/{G35,32},{G36,32},{G37,32},{G38,32},{G39,32},{G310,16},{G39,32},{G38,32},{G37,32},{G36,32},{G35,32},/*长度为一拍半的无头无尾滑音*/
    /*61*/{G45,8},{G45,8},{G45,8},{G45,4},{G63,8},{G45,8},{G63,8},    {G65,8},{G53,8},{G37,8},{G35,4},{G35,8},{G45,8},{G55,8},   {G26,8},{G26,8},{G26,8},{G26,8},{G210,8},{G210,8},{G210,8},{G210,8},    {G211,4},{G211,4},{0,2},
    /*65*/{G213,16},{G214,16},{G215,8},{0,8},{G45,16},{G46,16},{G47,8},{G45,8},{G35,8},{G35,4},/*借8*/    {G43,8},{G45,16},{G46,16},{G47,4},{G53,4},{G55,8},/*还8*/    {G43,8},{G44,8},{G45,4},{G32,8},{G33,8},{G35,8},{G36,8},    {G37,4},{G38,8},{G39,8},{G310,8},{G311,8},{0,4},
    /*69*/{G37,8},{G35,8},{G37,8},{G15,8},{0,8},{G37,8},{0,8},{G35,8},   {0,8},{G26,8},{0,8},{G25,8},{0,8},{G35,4},{0,8},   {G35,8},{G35,8},{0,8},{G39,8},{G39,8},{0,8},{G310,8},{G310,8},
    //OVER
    /*72*/{0,1}
};

note bass[]{
    /*1*/{0, 4}, {0, 4},

    /*2*/{C2, 4}, {0, 8}, {C2, 8}, {0, 4}, {A2s, 4},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},
    /*9*/{0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},    {0, 1},   {0, 1},
    /*19*/{0, 8}, {F3, 8}, {G3, 8}, {C3, 8}, {D3, 8}, {G2, 8}, {A2, 8},{B210,8},
    /*20*/{B46, 8}, {B46, 8}, {0, 8}, {B45, 4}, {B45, 8}, {0, 8}, {B35, 4},/*借八分*/   {B212, 8}, {0, 8}, {B310, 8}, {B312, 8}, {B210, 8}, {B212, 8}, {B110, 8},/*还八分*/
    /*22*/{B311, 8}, {B212, 8}, {B311, 8}, {B310, 8}, {0, 8}, {B310, 8}, {0, 8}, {B38, 4},/*借八分*/   {B37, 8}, {0, 8}, {B35, 8}, {0, 8}, {B48, 8}, {B45, 4},/*还八分*/
    //   <--Rhythm Checked
    /*24*/{B46, 8}, {B46, 8}, {0, 8}, {B45, 4}, {B45, 8}, {0, 8}, {B33, 16},{B34,16},   {B35, 8}, {B35, 8}, {0, 8}, {B25, 8}, {0, 4}, {B35, 4},   {B46, 8}, {B46, 8}, {0, 8}, {B45, 4}, {B45, 8}, {0, 8}, {B45, 8},
    /*27*/{0, 8}, {B35, 8}, {0, 8}, {B310, 8}, {B312, 8}, {B210, 8}, {B212, 8}, {B110, 8},    {B46, 8}, {B46, 8}, {0, 8}, {B45, 4}, {B45, 8}, {0, 8}, {B35, 4},/*借八分*/
    /*29*/{B212, 8}, {0, 8}, {B210, 4}, {B310, 8}, {B312, 4},/*还八分*/   {B25, 8}, {B35, 8}, {B25, 8}, {B25, 32}, {B25, 32}, {B27, 16}, {0, 8}, {B27, 8}, {0, 8}, {B27, 8},   {B28, 8}, {B38, 8}, {B28, 4}, {B16, 8}, {B16, 8}, {B28, 4},   {0,1},
    /*33*/{B46, 4}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8},    {B45, 8}, {B45, 8}, {B27, 8}, {B25, 4}, {B25, 8}, {B37, 8}, {B37, 8},   {B35, 8}, {B35, 8}, {B35, 8}, {B35, 8}, {B35, 8}, {B35, 8}, {B35, 8}, {B35, 8},   {B35, 8}, {B35, 8}, {B38, 8}, {B38, 8}, {B25, 8}, {B26, 8}, {B27, 4},
    //   <--Rhythm Checked
    /*37*/{B43, 4}, {B43, 8}, {B43, 4}, {B43, 8}, {B43, 8}, {B43, 8},    {B34, 8}, {B34, 8}, {B34, 8}, {B25, 4}, {B25, 8}, {B34, 8}, {B34, 8},    {0, 4}, {B40, 8}, {B40, 8}, {B41, 8}, {B41, 8}, {B45, 8}, {B45, 8},   {B36, 8}, {B36, 8}, {B38, 8}, {B38, 8}, {B310, 8}, {B28, 8}, {B310, 4},
    /*41*/{B46, 4}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8},   {B45, 8}, {B45, 8}, {B312, 4}, {B310, 4}, {B412, 4},   {B410, 8}, {B410, 8}, {B410, 8}, {B410, 8}, {B410, 8}, {B410, 8}, {B410, 8}, {B410, 8},    {B38, 8}, {B38, 8}, {B310, 8}, {B310, 8}, {B27, 8}, {B27, 8}, {B210, 4},
    /*45*/{B43, 4}, {B43, 8}, {B43, 4}, {B43, 8}, {B43, 8}, {B43, 8},    {B45, 4}, {B45, 8}, {B45, 4}, {B45, 8}, {B45, 8}, {B45, 8},    {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8},    {B48, 4}, {B48, 4}, {0, 8}, {B48, 8}, {B48, 4},
    /*49*/{B46, 4}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8},    {B46, 8}, {B46, 8}, {B46, 8}, {B35, 4}, {B38, 8},{B25,8},{B28,8},     {B45, 4}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8},   {B35, 8}, {B35, 8}, {B38, 8}, {B38, 8}, {B35, 8}, {B35, 8}, {B37, 16}, {B36, 16}, {B35, 32}, {B34, 32}, {B33, 32}, {0, 32},
    //   <--Rhythm Checked
    /*53*/{B43, 4}, {B43, 8}, {B43, 4}, {B43, 8}, {B43, 8}, {B43, 8},   {B34, 8}, {B34, 8}, {B34, 8}, {B25, 4}, {B25, 8}, {B34, 8}, {B34, 8},   {0, 4}, {B40, 8}, {B40, 8}, {B41, 8}, {B41, 8}, {B45, 8}, {B45, 8},    {B36, 8}, {B36, 8}, {B38, 8}, {B38, 8}, {B310, 8}, {B28, 8}, {B310, 4},
    /*57*/{B28, 8}, {B28, 8}, {B27, 8}, {B27, 8}, {B310, 8}, {B310, 8}, {B38, 8}, {B38, 8},    {B46, 8}, {B46, 8}, {B48, 8}, {B48, 8}, {B410, 8}, {B38, 8}, {B48, 4},   {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8}, {B45, 8},   {0, 4}, {B40, 8}, {B40, 8}, {B41, 8}, {B41, 8}, {B45, 8}, {B45, 8},
    /*61*/{B43, 4}, {B43, 8}, {B43, 4}, {B43, 8}, {B43, 8}, {B43, 8},    {B45, 4}, {B45, 8}, {B45, 4}, {B45, 8}, {B45, 8}, {B45, 8},   {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8}, {B46, 8},    {B210, 8}, {B210, 8}, {B38, 8}, {B38, 8}, {B310, 8}, {B210, 8}, {B310, 4},
    /*65*/{B46, 8}, {B46, 8}, {0, 8}, {B45, 4}, {B45, 8}, {0, 8}, {B35, 4},/*借八分*/     {B210, 32}, {B211, 32}, {B212, 8}, {B211, 32}, {B210, 32}, {B310, 8}, {B312, 8}, {B210, 8}, {B212, 8}, {B110, 8}, /*还八分*/     {B310, 8}, {B212, 8}, {B310, 8}, {B312, 4}, {B312, 4}, {B410, 8},      {B312, 8}, {B212, 4}, {B210, 4}, {B112, 8}, {B110, 16}, {B19, 16}, {B18, 32}, {B17, 32}, {B16, 32}, {0, 32},
    /*69*/{0, 1},       {0, 1},       {B20, 8}, {B20, 8}, {0, 8}, {B40, 8}, {B40, 8}, {0, 8}, {B41, 8}, {B41, 8},
    //OVER
    /*72*/{0,1}
    //   <--Rhythm Checked
};

note voice[]{
    /*1*/{0, 4}, {0, 4},

    /*2*/{0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},   {0, 1},
    /*11*/{0, 2}, {0, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 4}, {E4, 8}, {D4, 8}, {C4, 8},
    /*13*/{D4, 4}, {C4, 4}, {A3, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 4}, {E4, 8}, {D4, 8}, {C4, 8},
    /*15*/{D4, 4}, {C4, 4}, {D4, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 4}, {E4, 8}, {D4, 8}, {C4, 8},
    /*17*/{D4, 4}, {C4, 4}, {A3, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 8}, {F4, 8}, {F4, 8}, {A4, 4},
    /*19*/{G4, 4}, {C4, 8}, {C4, 8}, {E4, 4}, {D4, 4},  {0, 1},   {0, 1},   {0, 1},

    /*23*/{0, 2}, {0, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 4}, {E4, 8}, {D4, 8}, {C4, 8},
    /*25*/{D4, 4}, {C4, 4}, {A3, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 4}, {E4, 8}, {D4, 8}, {C4, 8},
    /*27*/{D4, 4}, {C4, 4}, {D4, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 4}, {E4, 8}, {D4, 8}, {C4, 8},
    /*29*/{D4, 4}, {C4, 4}, {A3, 4}, {0, 8}, {A3, 8},   {F4, 8}, {F4, 8}, {F4, 8}, {F4, 8}, {F4, 8}, {F4, 8}, {A4, 4},
    /*31*/{G4, 4}, {C4, 8}, {C4, 8}, {E4, 4}, {D4, 4},  {0, 1},
    //高潮部分
    /*33*/{A4, 2}, {D4, 2},   {G4, 2}, {A4s, 2},   {A4, 2}, {0, 4}, {F4, 4},//打ち鳴らせ、ひ
    /*36*/{C5, 4}, {A4s, 4}, {A4, 4}, {G4, 2},  {F4, 4}, {0, 4}, {F4, 4},   {E4, 4}, {F4, 4}, {0, 4}, {F4, 4}, //かりのファズで、雷鳴を、と
    /*39*/{G4, 4}, {F4, 4}, {G4, 4}, {A4, 2},   {A4s, 4}, {A4, 8}, {G4, 4}, {0, 8},
    /*41*/{A4, 2}, {D4, 2},   {G4, 2}, {A4s, 2},   {A4, 2}, {0, 4}, {F4, 4},
    /*44*/{C5, 4}, {A4s, 4}, {A4, 4}, {G4, 2},  {F4, 4}, {0, 4}, {C4, 8}, {E4, 4},   {E4, 8}, {F4, 4}, {0, 4}, {F4, 4},
    /*46*/{G4, 4}, {F4, 4}, {G4, 4}, {F4, 4},  {G4, 4}, {A4, 4}, {G4, 4}, {F4, 4},
    //重复一遍
    /*48*/{A4, 2}, {D4, 2},   {G4, 2}, {A4s, 2},   {A4, 2}, {0, 4}, {F4, 4},
    /*51*/{C5, 4}, {A4s, 4}, {A4, 4}, {G4, 2},  {F4, 4}, {0, 4}, {F4, 4},   {E4, 4}, {F4, 4}, {0, 4}, {F4, 4},
    /*54*/{G4, 4}, {F4, 4}, {G4, 4}, {A4, 2},   {A4s, 4}, {A4, 8}, {G4, 4}, {0, 8},
    /*56*/{A4, 2}, {D4, 2},   {G4, 2}, {A4s, 2},   {A4, 2}, {0, 4}, {F4, 4},
    /*58*/{C5, 4}, {A4s, 4}, {A4, 4}, {G4, 2},  {F4, 4}, {0, 4}, {C4, 8}, {E4, 4},   {E4, 8}, {F4, 4}, {0, 4}, {F4, 4},
    /*61*/{G4, 4}, {F4, 4}, {G4, 4}, {F4, 4},   {G4, 4}, {A4, 4}, {G4, 4}, {F4, 4},
    //OVER
    /*63*/{0,1},{0,1},{0,1},{0,1},{0,1},{0,1},{0,1},{0,1},
    /*72*/{0,1}
};

note guitar_2[]{
    /*1*/{0, 4}, {0, 4},
    /*2*/{F4, 4}, {0, 8}, {F4, 8}, {0, 4}, {F4, 4},   {0,1},   {G66, 8},{G66,8},{0,8},{G65,8},{G65,8},{0,8},{G55,8},{G55,8},
    /*5*/{0,1},    {G55,8},{G55,8},{0,8},{G57,8},{G57,8},{0,8},{G53,8},{G53,8},    {0,1},    {G66, 8},{G66,8},{0,8},{G65,8},{G65,8},{0,8},{G55,8},{G55,8},
    /*9*/{0,1},  {G55,8},{G55,8},{0,8},{G53,8},{G53,8},{0,8},{G53,8},{G53,8},    {0,1},    {G66, 8},{G66,8},{0,8},{G65,8},{G65,8},{0,8},{G55,8},{G55,8},
    /*13*/{0,1},    {G55,8},{G55,8},{0,8},{G57,8},{G57,8},{0,8},{G53,8},{G53,8},    {0,1},    {G66, 8},{G66,8},{0,8},{G65,8},{G65,8},{0,8},{G55,8},{G55,8},
    /*17*/{0,1},    {G55,8},{G55,8},{0,8},{G53,8},{G53,8},{0,8},{G53,8},{G53,8},    {0,1},    {G66,8},{G66,8},{0,8},{G65,4},{G65,8},{0,8},{G55,4},/*借8*/
    /*21*/{G55,8},{G55,8},{G55,8},{G55,8},{G55,8},{G55,8},{0,8},    {G54,8},{G54,8},{0,8},{G62,8},{0,8},{G62,8},{0,8},{G61,4},/*借8*/    {G61,8},{G61,8},{G61,4},{G61,8},{G61,4},    {G66,8},{G66,8},{0,8},{G65,4},{G65,8},{0,4},
    /*25*/{G55,8},{G55,8},{0,8},{G55,4},{G55,8},{0,4},    {G66,8},{G66,8},{0,8},{G65,4},{G65,8},{0,4},    {G47,8},{G47,8},{G55,8},{G55,8},{G47,8},{G47,8},{G55,8},{G55,8},    {G66,8},{G66,8},{0,8},{G65,4},{G65,8},{0,4},
    /*29*/{G55,8},{G55,8},{0,8},{G55,4},{G55,8},{0,4},    {G63,8},{G63,8},{0,8},{G65,4},{G65,8},{0,4},    {G66,8},{G66,8},{G66,8},{G66,8},{G66,8},{G66,8},{G66,8},{G66,8},    {0,4},{G410,8},{0,8},{0,4},{G410,8},{0,8},
    /*33*/{G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},    {G65,4},{G65,8},{G65,4},{G65,8},{G65,8},{G65,8},    {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},     {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},
    /*37*/{G63,4},{G63,8},{G63,4},{G63,8},{G63,8},{G63,8},    {G54,4},{G54,8},{G54,4},{G54,8},{G54,8},{G54,8},    {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},     {G56,4},{G56,8},{G56,4},{G56,8},{G56,8},{G56,8},
    /*41*/{G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},    {G65,4},{G65,8},{G65,4},{G65,8},{G65,8},{G65,8},    {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},     {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},
    /*45*/{G63,4},{G63,8},{G63,4},{G63,8},{G63,8},{G63,8},    {G65,4},{G65,8},{G65,4},{G65,8},{G65,8},{G65,8},    {G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},     {G68,4},{G66,4},{0,2},
    /*49*/{G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},    {G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},    {G65,4},{G65,8},{G65,4},{G65,8},{G65,8},{G65,8},     {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},
    /*53*/{G63,4},{G63,8},{G63,4},{G63,8},{G63,8},{G63,8},    {G54,4},{G54,8},{G54,4},{G54,8},{G54,8},{G54,8},    {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},     {G56,4},{G56,8},{G56,4},{G56,8},{G56,8},{G56,8},
    /*57*/{G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},    {G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},    {G65,4},{G65,8},{G65,4},{G65,8},{G65,8},{G65,8},     {G55,4},{G55,8},{G55,4},{G55,8},{G55,8},{G55,8},
    /*61*/{G63,4},{G63,8},{G63,4},{G63,8},{G63,8},{G63,8},    {G65,4},{G65,8},{G65,4},{G65,8},{G65,8},{G65,8},    {G66,4},{G66,8},{G66,4},{G66,8},{G66,8},{G66,8},     {G68,4},{G66,4},{0,2},
    /*65*/{G66,8},{G66,8},{G66,8},{G65,4},{G65,8},{0,8},{G68,16},{G69,16},    {G610,8},{G610,8},{G610,8},{G610,4},{G610,8},{G610,8},{0,8},    {G63,8},{G63,8},{G63,8},{G65,4},{G65,8},{G65,8},{G64,16},{G63,32},{G62,32},    {G61,8},{G61,8},{G61,8},{G61,4},{G61,8},{G61,4},
    /*69*/{G43,8},{G42,8},{G43,8},{G21,8},{0,8},{G43,8},{0,8},{G43,8},    {0,8},{G32,8},{0,8},{G30,8},{0,8},{G43,4},{0,8},    {G55,8},{G55,8},{0,8},{G65,8},{G65,8},{0,8},{G61,8},{G61,8},
    //OVER
    /*72*/{0,1}
};

note drums[]{
    /*1*/{0, 4}, {0, 4},

    /*2*/{BS, 4}, {0, 8}, {BS, 8}, {0, 4}, {BS, 4},     {0, 1},   {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},
    /*5*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},   {BS, 4},{TM,8},{TL,16},{TL,16},{BS,8},{BS,8},{TM,8},{BS,8},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},
    /*9*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},   {BS, 4},{TM,8},{TL,16},{TL,16},{BS,8},{BS,8},{TM,8},{BS,8},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},
    /*13*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},   {BS, 4},{TM,8},{TL,16},{TL,16},{BS,8},{BS,8},{TM,8},{BS,8},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},
    /*17*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,8},{TM,8},{0,8},{BS,8},{TM,4},   {BS,8},{BS,8},{TM,8},{BS,8},{TM,8},{BS,8},{TH,4},    {BS,8},{TL,16},{TL,16},{TL,8},{BS,4},{BS,8},{TM,8},{BS,8},
    /*21*/{0,8},{TM,8},{BS,8},{TM,8},{BS,8},{TM,8},{BS,4},   {BS,16},{TM,16},{TM,16},{TM,16},{TM,8},{BS,8},{0,8},{BS,8},{TM,8},{BS,8},   {0,8},{TL,8},{BS,8},{TL,8},{BS,8},{TM,16},{TM,16},{BS,16},{TM,16},{TH,8},   {BS,4},{TM,8},{BS,4},{BS,8},{TM,4},
    /*25*/{BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,4},{TM,8},{BS,4},{BS,8},{TM,8},{TM,16},{TM,16},    {BS,4},{TM,8},{BS,4},{BS,8},{TM,4},
    /*29*/{BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,8},{BS,8},{TM,4},{BS,16},{TM,16},{TM,16},{TM,16},{BS,16},{TM,16},{TM,16},{TM,16},    {BS,4},{BS,4},{BS,4},{BS,4},
    /*33*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},
    /*37*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,8},{BS,8},{TM,4},{BS,16},{TM,16},{TM,16},{TM,16},{BS,16},{TM,16},{TM,16},{TM,16},
    /*41*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{BS,4},{BS,16},{TM,16},{BS,8},{BS,8},{0,16},{TM,16},
    /*45*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,8},{BS,8},{TM,4},{BS,16},{TH,16},{TL,8},{BS,8},{TM,16},{TM,16},
    /*49*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},
    /*53*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,8},{BS,8},{TM,4},{BS,8},{TM,16},{TM,16},{BS,16},{TM,16},{TM,16},{TM,16},
    /*57*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,4},
    /*61*/{BS,4},{TM,4},{BS,8},{BS,8},{TM,4},    {BS,4},{TM,4},{BS,8},{BS,8},{TM,8},{BS,16},{BS,16},  {TM,8},{BS,8},{TM,8},{BS,8},{TM,8},{BS,8},{TM,8},{BS,8},   {TM,8},{0,16},{TM,16},{BS,8},{TM,16},{TM,16},{BS,16},{TM,16},{TM,16},{TM,16},{BS,16},{TM,16},{TM,16},{TM,16},
    /*65*/{BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,8},{BS,8},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,8},{BS,8},{BS,4},{BS,8},{TM,16},{TM,16},{BS,16},{TM,16},{TH,8},
    /*69*/{BS,4},{TM,8},{BS,4},{BS,8},{TM,4},    {BS,8},{BS,8},{TM,4},{BS,16},{TM,16},{TM,16},{TM,16},{TM,8},{TM,8},    {TM,8},{TM,16},{TH,16},{TL,8},{TM,8},{TM,8},{BS,8},{TM,8},{TM,8},
    //OVER
    /*72*/{0,1}
};
int main()
{
    HMIDIOUT handle;
    midiOutOpen(&handle, 0, 0, 0, CALLBACK_NULL); //打开midi通道
    int volume[]{ 68, 85, 127, 60, 90 }; //各音轨的音量；最高音量为127, 即0x7f
    float bpm = 240;
    float time_of_whole = 4 * 60 * 1000 / bpm; //一个全音符的时长，单位毫秒

    midiOutShortMsg(handle, 30 << 8 | 0xC0);//设置主音吉他音色
    midiOutShortMsg(handle, 33 << 8 | 0xC1);//贝斯音色
    midiOutShortMsg(handle, 0 << 8 | 0xC2);//人声
    midiOutShortMsg(handle, 30 << 8 | 0xC3);//节奏吉他音色
    midiOutShortMsg(handle, 117 << 8 | 0xC4);//鼓音色

    // 为每个音轨创建一个计时器和记录它们演奏到哪儿了的指针
    struct {
        note* where;
        float timer;
    } each[5] = {
        {&guitar_1[1], time_of_whole},
        {&bass[1], time_of_whole},
        {&voice[1], time_of_whole},
        {&guitar_2[1], time_of_whole},
        {&drums[1], time_of_whole}
    };


    float cycle = time_of_whole / 32;//以32分音符为循环的最小单位
    int rhythm = 0;
    while (each[0].where < guitar_1 + sizeof(guitar_1) / sizeof(note)) {
        // 节拍可视化
        rhythm++;
        // 演奏单元
        for (int i = 0; i < 5; i++) {
            if (each[i].timer >= time_of_whole / (each[i].where - 1)->time) {
                midiOutShortMsg(handle, 0x7BB0 + i);
                if (each[i].where->pitch) {
                    midiOutShortMsg(handle, (volume[i] << 16) + (each[i].where->pitch << 8) + 0x90 + i);//演奏对应的乐器
                }
                each[i].timer = 0;
                each[i].where++;
            }
            each[i].timer += cycle;
        }
        Sleep(cycle);
    }
    Sleep(2000);
    midiOutClose(handle);
    return 0;
}