#include <windows.h>
#include <stdio.h>
#include <iostream>
#include <mmsystem.h>  
#include <mutex>  
#pragma comment(lib,"winmm.lib")
using namespace std;
enum Scale {
	Rest = 0, C8 = 108, B7 = 107, A7s = 106, A7 = 105, G7s = 104, G7 = 103, F7s = 102, F7 = 101, E7 = 100,
	D7s = 99, D7 = 98, C7s = 97, C7 = 96, B6 = 95, A6s = 94, A6 = 93, G6s = 92, G6 = 91, F6s = 90, F6 = 89,
	E6 = 88, D6s = 87, D6 = 86, C6s = 85, C6 = 84, B5 = 83, A5s = 82, A5 = 81, G5s = 80, G5 = 79, F5s = 78,
	F5 = 77, E5 = 76, D5s = 75, D5 = 74, C5s = 73, C5 = 72, B4 = 71, A4s = 70, A4 = 69, G4s = 68, G4 = 67,
	F4s = 66, F4 = 65, E4 = 64, D4s = 63, D4 = 62, C4s = 61, C4 = 60, B3 = 59, A3s = 58, A3 = 57, G3s = 56,
	G3 = 55, F3s = 54, F3 = 53, E3 = 52, D3s = 51, D3 = 50, C3s = 49, C3 = 48, B2 = 47, A2s = 46, A2 = 45,
	G2s = 44, G2 = 43, F2s = 42, F2 = 41, E2 = 40, D2s = 39, D2 = 38, C2s = 37, C2 = 36, B1 = 35, A1s = 34,
	A1 = 33, G1s = 32, G1 = 31, F1s = 30, F1 = 29, E1 = 28, D1s = 27, D1 = 26, C1s = 25, C1 = 24, B0 = 23,
	A0s = 22, A0 = 21
};
//梦返
void Star_and_Sea(void);
void Star_and_Sea(void)
{
	HMIDIOUT handle;
	midiOutOpen(&handle, 0, 0, 0, 0);
	int star[] = {
		0, 1, 0, 3500, 1, F5, 250, 1, D5s, 250,//1
		2, D5s, F2, 500, 2, C5, C2, 250, 1, D5s, 250, 2, D5s, F3, 500, 1, G4s, 250, 1, F4, 250, 2, F4, C2s, 500, 1, G2s, 500, 1, C3s, 250, 1, G4s, 250, 1, F5, 250, 1, D5s, 250,//2
		2, D5s, G2s, 500, 2, C5, D3s, 250, 1, D5s, 250, 2, D5s, G3s, 500, 2, C5, D3s, 250, 1, D5s, 250, 2, D5s, D2s, 500, 1, G2, 500, 1, D3s, 500, 1, F5, 250, 1, D5s, 250,//3
		2, D5s, F2, 500, 2, C5, C3, 250, 1, D5s, 250, 2, D5s, F3, 500, 1, G4s, 250, 1, F4, 250, 2, F4, C2s, 500, 1, G2s, 500, 1, C3s, 250, 1, G4s, 250, 2, F5, F3, 250, 1, D5s, 250,//4
		2, D5s, G2s, 500, 2, C5, D3s, 250, 1, D5s, 250, 2, D5s, G3s, 500, 2, C5, D3s, 250, 1, D5s, 250, 3, D5s, A2s, D2s, 1000, 2, D3s, G2, 250, 1, D5s, 250, 1, D5s, 250, 1, C5s, 250,//5
		2, C5s, A2s, 500, 1, F3, 500, 1, A3s, 250, 1, D5s, 250, 1, D5s, 250, 1, C5s, 250, 2, C5s, C2s, 500, 1, G2s, 500, 1, C3s, 250, 1, C5s, 250, 2, C5s, F3, 250, 1, C5, 250,//6
		2, C5, G2s, 500, 2, D5s, D3s, 250, 1, D5s, 250, 2, D5s, G3s, 250, 1, C5, 500, 1, A4s, 250, 2, A4s, D2s, 500, 1, G2, 500, 1, A2s, 250, 1, D5s, 250, 2, D5s, D3s, 250, 1, C5s, 250,//7
		2, C5s, A2s, 500, 1, F3, 500, 1, A3s, 250, 1, D5s, 250, 1, D5s, 250, 1, C5s, 250, 2, C5s, C2s, 500, 1, G2s, 500, 1, C3s, 250, 1, C5s, 250, 2, C5s, F3, 250, 1, C5, 250,//8
		2, C5, G2s, 500, 2, D5s, D3s, 250, 1, D5s, 250, 2, D5s, G3s, 250, 1, G5s, 500, 1, A5s, 250, 2, A5s, D2s, 500, 1, G2, 250, 1, D5s, 250, 2, C6s, A2s, 250, 1, C6s, 250, 2, C6s, D3s, 250, 1, C6, 250,//9
		2, C6, G2s, 250, 1, D3s, 250, 1, G3s, 250, 2, C6, A3s, 250, 2, C6, C4, 250, 1, C6s, 250, 1, C6, 250, 1, C6, 250, 2, C6, D2s, 250, 1, G2, 250, 1, A2s, 250, 2, C6, D3s, 250, 2, C6, G3, 250, 1, D6s, 250, 1, C6, 250, 1, D6s, 250,//10
		2,D6s,F2,250,1,C3,250,2,G5s,F3,250,2,G5s,G3s,250,2,G5s,C4,250,1,A5s,250,1,G3s,250,1,C6,250,2,C6,C3,250,1,D3s,250,1,G3,250,2,C6,C4,250,2,C6,C4,250,1,D6s,250,1,C6,250,1,D6s,250,//11
		2,D6s,C2s,500, 1,G2s,250, 2,C6,C3s,250, 2,C6,F3,250, 1,D6s,250, 2,C6,C3s,250, 1,G5s,250, 2,G5s,G2s,500, 1,D3s,500, 1,G3s,250, 1,F5,250, 1,G5s,250, 1,D6s,250,//12
	 	2,D6s,A2s,250, 2,D6s,F3,250, 2,D6s,A3s,250, 2,D6s,C4,250, 2,D6s,C4s,250, 2,C6,C4,250, 2,G5s,A3s,250, 2,A5s,F3,250, 2,A5s,C2s,500, 1,G2s,250, 1,D5s,250, 2,C6s,C3s,250, 1,C6s,250, 2,C6s,F3,250, 1,C6s,250,//13
		2,C6,G2s,250, 1,D3s,250, 1,G3s,250, 2,C6,A3s,250, 2,C6,C4,250, 1,C6s,250, 1,C6,250, 1,C6,250, 2,C6,D2s,250, 2,A5s,G2,250, 1,A2s,250, 1,D3s,250, 2,C6,G3,250, 1,D6s,250, 1,C6,250, 1,D6s,250,//14
 		2,D6s,F2,250, 1,C3,250, 2,G5s,F3,250, 2,G5s,G3s,250, 2,G5s,C4,250, 1,A5s,250, 1,G3s,250, 1,C6,250, 2,C6,C3,250, 1,D3s,250, 1,G3,250, 2,C6,C4,250, 2,C6,C4,250, 1,D6s,250, 1,C6,250, 1,D6s,250,//15
		2,D6s,C2s,500, 1,G2s,250, 2,C6,C3s,250, 2,C6,F3,250, 1,D6s,250, 2,C6,C3s,250, 1,G5s,250, 2,G5s,G2s,500, 1,D3s,500, 1,G3s,250, 1,F5,250, 1,G5s,250, 1,D6s,250,//16
		3,D6s,A2s,F3,250, 1,D6s,250, 1,D6s,250, 1,D6s,250, 1,D6s,250, 1,C6,250, 1,G5s,250, 1,A5s,250, 1,A5s,750, 1,D5s,250, 1,C6,250, 1,A5s,250, 1,A5s,250, 1,G5s,250,//17
		2,G5s,G2s,1500, 1,D3s,500, 2,G3s,D3s,1000, 1,0,500, 1,F5,250, 1,D5s,250,//18
		2,D5s,F2,500, 2,C5,C3,250, 1,D5s,250, 2,D5s,F3,500, 1,C3,250, 1,G2s,250, 2,G2s,C2s,500, 1,G2s,500, 1,C3s,250, 1,G4s,250, 1,F5,250, 1,D5s,250,//19
		2,D5s,G2s,500, 2,C5,D3s,250, 1,D5s,250, 1,G3s,500, 2,C5,D3s,250, 1,D5s,250, 2,D5s,D2s,500, 1,G2,500, 1,D5s,500, 1,F5,250, 1,D5s,250,//20
		2,D5s,F2,500, 2,C5,C3,250, 1,D5s,250, 2,D5s,F3,500, 1,G4s,250, 1,F4,250, 2,F4,C2s,500, 1,G2s,500, 1,C3s,250, 1,G4s,250, 2,F5,F3,250, 1,D5s,250,//21
		2,D5s,G2s,500, 2,C5,D3s,250, 1,D5s,250, 2,D5s,G3s,500, 2,C5,D3s,250, 1,D5s,250, 3,D5s,A2s,D2s,1000, 2,D3s,G2,250, 1,D5s,250, 1,D5s,250, 1,C5s,250,//22
		2,C5s,A2s,500, 1,F3,500, 1,A3s,250, 1,D5s,250, 1,D5s,250, 1,C5s,250, 2,C5s,C2s,500, 1,G2s,500, 1,C3s,250, 1,C5s,250, 2,C5s,F3,250, 1,C5,250,//23
		2,C5,G2s,500, 2,D5s,D3s,250, 1,D5s,250, 2,D5s,G3s,250, 1,C5,500, 1,A4s,250, 2,A4s,D2s,500, 1,G2,500, 1,A2s,250, 1,D5s,250, 2,D5s,D3s,250, 1,C5s,250,//24
		2,C5s,A2s,500,1,F3,500,1,A3s,250,1,D5s,250,1,D5s,250,1,C5s,250,2,C5s,C2s,500,1,G2s,500,1,C3s,250,1,C5s,250,2,C5s,F3,250,1,C5,250,//25
		2,C5,G2s,500,2,D5s,D3s,250,1,D5s,250,2,D5s,G3s,250,1,G5s,500,1,A5s,250,2,A5s,D2s,500,1,G2,250,1,D5s,250,2,C6s,A2s,250,1,C6s,250,2,C6s,D3s,250,1,C6,250,//26
		2,C6,G2s,250,1,D3s,250,1,G3s,250,2,C6,A3s,250,2,C6,C4,250,1,C6s,250,1,C6,250,1,C6,250,2,C6,D2s,250,1,G2,250,1,A2s,250,2,C6,D3s,250,2,C6,G3,250,1,D6s,250,1,C6,250,1,D6s,250,//27
		2,D6s,F2,250,1,C3,250,2,G5s,F3,250,2,G5s,G3s,250,2,G5s,C4,250,1,A5s,250,1,G3s,250,1,C6,250,2,C6,C3,250,1,D3s,250,1,G3,250,2,C6,C4,250,2,C6,C4,250,1,D6s,250,1,C6,250,1,D6s,250,//28
		2,D6s,C2s,500,1,G2s,250,2,C6,C3s,250,2,C6,F3,250,1,D6s,250,2,C6,C3s,250,1,G5s,250,2,G5s,G2s,500,1,D3s,500,1,G3s,250,1,F5,250,1,G5s,250,1,D6s,250,//29
		2,D6s,A2s,250,2,D6s,F3,250,2,D6s,A3s,250,2,D6s,C4,250,2,D6s,C4s,250,2,C6,C4,250,2,G5s,A3s,250,2,A5s,F3,250,2,A5s,C2s,500,1,G2s,250,1,D5s,250,2,C6s,C3s,250,1,C6s,250,2,C6s,F3,250,1,C6s,250,//30
		2,C6,G2s,250,1,D3s,250,1,G3s,250,2,C6,A3s,250,2,C6,C4,250,1,C6s,250,1,C6,250,1,C6,250,2,C6,D2s,250,2,A5s,G2,250,1,A2s,250,1,D3s,250,2,C6,G3,250,1,D6s,250,1,C6,250,1,D6s,250,//31
		2,D6s,F2,250,1,C3,250,2,G5s,F3,250,2,G5s,G3s,250,2,G5s,C4,250,1,A5s,250,1,G3s,250,1,C6,250,2,C6,C3,250,1,D3s,250,1,G3,250,2,C6,C4,250,2,C6,C4,250,1,D6s,250,1,C6,250,1,D6s,250,//32
		2,D6s,C2s,500,1,G2s,250,2,C6,C3s,250,2,C6,F3,250,1,D6s,250,2,C6,C3s,250,1,G5s,250,2,G5s,G2s,500,1,D3s,500,1,G3s,250,1,F5,250,1,G5s,250,1,D6s,250,//33
		3,D6s,A2s,F3,250,1,D6s,250,1,D6s,250,1,D6s,250,3,D6s,F3,A2s,250,1,C6,250,1,G5s,250,1,A5s,250,1,A5s,750,1,D5s,250,1,C6,250,1,A5s,250,1,A5s,250,1,G5s,250,//34
		2,G5s,G2s,1000,1,G2s,500,1,D3s,500,2,D3s,G3s,750,1,D5s,250,1,C6s,500,1,C6s,500,1,C6s,500,1,C6,500,//35
		2,C6,G2s,250,1,D3s,250,1,G3s,250,2,C6,A3s,250,2,C6,C4,250,1,C6s,250,1,C6,250,1,C6,250,2,C6,D2s,250,1,G2,250,1,A2s,250,2,C6,D3s,250,2,C6,G3,250,1,D6s,250,1,C6,250,1,D6s,250,//36
		2,D6s,F2,250,1,C3,250,2,G5s,F3,250,2,G5s,G3s,250,2,G5s,C4,250,1,A5s,250,1,G3s,250,1,C6,250,2,C6,C3,250,1,D3s,250,1,G3,250,2,C6,C4,250,2,C6,C4,250,1,D6s,250,1,C6,250,1,D6s,250,//37
		2,D6s,C2s,500,1,G2s,250,2,C6,C3s,250,2,C6,F3,250,1,D6s,250,2,C6,C3s,250,1,G5s,250,2,G5s,G2s,500,1,D3s,500,1,G3s,250,1,F5,250,1,G5s,250,1,D6s,250,//38
		2,D6s,A2s,250,2,D6s,F3,250,2,D6s,A3s,250,2,D6s,C4,250,2,D6s,C4s,250,2,C6,C4,250,2,G5s,A3s,250,2,A5s,F3,250,2,A5s,C2s,500,1,G2s,250,1,D5s,250,2,C6s,C3s,250,1,C6s,250,2,C6s,F3,250,1,C6s,250,//39
		2,C6,G2s,250,1,D3s,250,1,G3s,250,2,C6,A3s,250,2,C6,C4,250,1,C6s,250,1,C6,250,1,C6,250,2,C6,D2s,250,2,A5s,G2,250,1,A2s,250,1,D3s,250,2,C6,G3,250,1,D6s,250,1,C6,250,1,D6s,250,//40
		2,D6s,F2,250,1,C3,250,2,G5s,F3,250,2,G5s,G3s,250,2,G5s,C4,250,1,A5s,250,1,G3s,250,1,C6,250,2,C6,C3,250,1,D3s,250,1,G3,250,2,C6,C4,250,2,C6,C4,250,1,D6s,250,1,C6,250,1,D6s,250,//41
		2,D6s,C2s,500,1,G2s,250,2,C6,C3s,250,2,C6,F3,250,1,D6s,250,2,C6,C3s,250,1,G5s,250,2,G5s,G2s,500,1,D3s,500,1,G3s,250,1,F5,250,1,G5s,250,1,D6s,250,//42
		3,D6s,A2s,F3,250,1,D6s,250,1,D6s,250,1,D6s,250,3,D6s,F3,A2s,250,1,C6,250,1,G5s,250,1,A5s,250,1,A5s,750,1,D5s,250,1,C6,250,1,A5s,250,1,A5s,250,1,G5s,250,//43
		2,G5s,G2s,1000,1,G5s,3000,//44
		1,0,1000,-1
	};
	int i = 1 , t = 0 , o = 0 , tt = 0 , oo = 0;
	int sea[10010];
	while (star[i] != -1)
	{
		t = star[i];
		for (o = i + 1; o <= i + star[i]; ++o)
		{
			if (star[o] != 0)
			{
				sea[o] = ((0x7f) << 16) + (star[o] << 8) + (0x90);
				midiOutShortMsg(handle, sea[o]);
			}
		}
		Sleep(star[i + star[i] + 1]);
		oo += star[i + star[i] + 1];
		if (oo == 4000)
		{
			oo = 0;
			tt++;
		}
		i = i + star[i] + 2;
	}
	midiOutClose(handle);
}
int main(void)
{
	Star_and_Sea();
	return 0;
}